<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>-1</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scan_list = ds_list_create();
ds_list_add(scan_list,0);
ds_list_add(scan_list,0);

// Initialize GMOculus
GMO_init(); 
//RF_init(working_directory+"\lib\ReadFile2.dll");

//FPSController_create();
// Preload lights
//initLights();

alarm[1]=2;

frame = 0;
rdy = 0;
rwidth = 0;
rheight = 700;
rlength = 0;
play = 0;
audio = "song";
fpswarning = 0;
needpal = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if !(read_ilda(0))
    game_end();
if (needpal)
    parse_palette();

songloaded = 0;
if (show_question("Do you wish to open an accompanying song?"))
    {
    saud_load(get_open_filename("",""),audio);
    songloaded = 1;
    }
rdy = 1;
//read_frame();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>fpswarning = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//FPSController_step();
if (rdy)
    {
    if (keyboard_check(vk_right))
        {
        if (frame &lt; ds_list_size(ild_list)-6) frame++; //read_frame();
        }
    if (keyboard_check(vk_left))
        {
        if (frame) frame--; //read_frame();
        }
    
    if (keyboard_check_pressed(vk_tab))
        {if !(room) room_goto_next(); else room_goto_previous();}
        
    if (keyboard_check_pressed(vk_space) and songloaded)
        {
        if (saud_is_playing(audio))
            {
            saud_stop(audio);
            play = 0;
            }
        else
            {
            saud_seek(floor(frame*1000/30),audio);
            play = 1;
            }
        }
    if (keyboard_check_pressed(vk_backspace))
        {
        frame = 0;
        //read_frame();
        play = 0;
        }
        
    if (play == 1 and (frame &lt; ds_list_size(ild_list)-5))
        { 
        frame++; 
        //read_frame();
        }
            
    if (keyboard_check_pressed(ord('M')))
        {
        seekto = get_integer("Enter frame number to skip to, 0 to "+string(ds_list_size(ild_list)-6),0);
        saud_stop(audio);
        play = 0;
        frame = seekto;
        //read_frame();
        }
    
    if (keyboard_check_pressed(ord('N')) and ds_list_find_index(scan_list,0) == 1)
        {
        saud_stop(audio);
        play = 0;
        //new_scanner = instance_create(1600,1250,obj_scanner);
        //new_scanner.scanner = ds_list_find_index(scan_list,0);
        read_ilda(1);
        show_message("Loaded");
        instance_create(room_width/2-200,room_height/2,obj_flankscanner);
        instance_create(room_width/2+200,room_height/2,obj_flankscanner1);
        if (room)
            window_set_fullscreen(1);
        }
        
        
    if (room)
        {
        if (play and (((real(saud_position(audio))/1000*30 - frame) &gt; 10 or (real(saud_position(audio))/1000*30 - frame) &lt; -10))) 
           frame = floor(real(saud_position(audio))/1000*30);
        
        if (play and fps &gt; 29)
            {
            fpswarning = 1;
            alarm[0] = 1500;
            }
        }
        
    }
    
    
    

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (room)
    {
    //Start our 3D engine
    init3D();
    instance_create(room_width/2,room_height/2,obj_scanner);
    if (ds_list_find_value(scan_list,1) != 0)
        {
        instance_create(room_width/2-200,room_height/2,obj_flankscanner);
        instance_create(room_width/2+200,room_height/2,obj_flankscanner1);
        }
    }
else
    end3D();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>

draw_set_font(fnt_info);
if (rdy)
    {
    //list_id = frame_list;
    ild_list = ds_list_find_value(scan_list,0);
    list_id = ds_list_find_value(ild_list,frame);
    if (room)
        {
        /// Draw some debugging text
        draw_set_color(c_gray)
        draw_text(10,10,"Press TAB to switch between 2D/3D#See readme for controls##Name: "+string(ds_list_find_value(list_id,3))+
         "#Author: "+string(ds_list_find_value(list_id,4))+
         "#Number "+string(frame)+"/"+string(ds_list_size(ild_list)-6)+
         "#Time: "+time(frame)+" / "+time(ds_list_size(ild_list)-6)+
         "#Scanner: "+string(ds_list_find_value(list_id,1))+
         "#ILDA format: "+string(ds_list_find_value(list_id,2))+
         "##FPS: " + string(fps) +
         "#Resolution: " + string(GMO_getResolutionWidth()) + "x" + string(GMO_getResolutionHeight()) +
         "#XY: " + string(obj_camera.x) + "x" + string(obj_camera.y) +
         "#Interpupillary Distance" + string(GMO_getIPD()));
         if (fpswarning) 
            {
            draw_set_color(c_red);
            draw_text(10,220,"Warning:#FPS has dropped lower than 30,#this can cause playback skipping");
            draw_set_color(c_gray);
            }
        
        
        // Change IPD
        if (keyboard_check_direct(ord("L"))) {
            GMO_setIPD(GMO_getIPD()+0.01);
        }
        if (keyboard_check_direct(ord("K"))) {
            GMO_setIPD(GMO_getIPD()-0.01);
        }
        }
    else
        {
        draw_set_color(c_ltgray)
        draw_text(10,10,"Press TAB to switch between 2D/3D#See readme for controls##Name: "+string(ds_list_find_value(list_id,3))+
        "#Author: "+string(ds_list_find_value(list_id,4))+
        "#Number "+string(frame)+"/"+string(ds_list_size(ild_list)-6)+
        "#Time: "+time(frame)+" / "+time(ds_list_size(ild_list)-6)+
        "#Scanner: "+string(ds_list_find_value(list_id,1))+
        "#ILDA format: "+string(ds_list_find_value(list_id,2)));

        }
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (!room and rdy)
    {
    i = 0;
    while (i&lt;=ds_list_size(scan_list))
        {
        if (ds_list_find_value(scan_list,i))
            draw_frame_2d(i);
        i++;
        }
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="27">
      <action>
        <libid>1</libid>
        <id>332</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>1</exetype>
        <functionname>action_end_game</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
